const express = require('express');
const apiRouter = express.Router();
const { registerUser } = require('../db/db.js');

apiRouter.get("/", (req, res, next)=>{
    ("echoe")
});
const errorMiddleware = (err, req, res) => {

}
apiRouter.post("/register", async (req, res, next) => {
    const { firstName, lastName, userName, password } = await req.body;
       if(!firstName || !lastName || !userName || !password){
        const err = new Error('Missing value in request body');
        err.status = 400;
        return next(err);
       }else{
       await registerUser(firstName, lastName, userName, password);
       res.status(201).send(req.body);
    }
});

module.exports = apiRouter;
